<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QtFit: FitStreamReaderPrivate Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QtFit
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Internal library development documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classFitStreamReaderPrivate.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classFitStreamReaderPrivate-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">FitStreamReaderPrivate Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides private implementation for <a class="el" href="classFitStreamReader.html" title="The FitStreamReader class provides a streaming parser for reading Garmin FIT files.">FitStreamReader</a>.  
 <a href="classFitStreamReaderPrivate.html#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for FitStreamReaderPrivate:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classFitStreamReaderPrivate__coll__graph.svg" width="188" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:acf93389d706fbe22fe4b1addb0d4264c"><td class="memItemLeft" align="right" valign="top"><a id="acf93389d706fbe22fe4b1addb0d4264c"></a>
typedef qsizetype&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">size_t</a></td></tr>
<tr class="memdesc:acf93389d706fbe22fe4b1addb0d4264c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size type for size-related operations. <br /></td></tr>
<tr class="separator:acf93389d706fbe22fe4b1addb0d4264c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9f2a362d5d4b06ee6843594e7132e8c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a9f2a362d5d4b06ee6843594e7132e8c3">FitStreamReaderPrivate</a> (<a class="el" href="classFitStreamReader.html">FitStreamReader</a> *const q)</td></tr>
<tr class="memdesc:a9f2a362d5d4b06ee6843594e7132e8c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="classFitStreamReaderPrivate.html" title="Provides private implementation for FitStreamReader.">FitStreamReaderPrivate</a> object, with public implementation <em>q</em>.  <a href="classFitStreamReaderPrivate.html#a9f2a362d5d4b06ee6843594e7132e8c3">More...</a><br /></td></tr>
<tr class="separator:a9f2a362d5d4b06ee6843594e7132e8c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af40f124097e0661b1c66f3e55e80127e"><td class="memItemLeft" align="right" valign="top"><a id="af40f124097e0661b1c66f3e55e80127e"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#af40f124097e0661b1c66f3e55e80127e">~FitStreamReaderPrivate</a> ()</td></tr>
<tr class="memdesc:af40f124097e0661b1c66f3e55e80127e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the <a class="el" href="classFitStreamReaderPrivate.html" title="Provides private implementation for FitStreamReader.">FitStreamReaderPrivate</a> object. <br /></td></tr>
<tr class="separator:af40f124097e0661b1c66f3e55e80127e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a200ad0a1cb1dda3cbe03f3c47bf1293d"><td class="memItemLeft" align="right" valign="top"><a id="a200ad0a1cb1dda3cbe03f3c47bf1293d"></a>
QByteArray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a200ad0a1cb1dda3cbe03f3c47bf1293d">data</a></td></tr>
<tr class="memdesc:a200ad0a1cb1dda3cbe03f3c47bf1293d"><td class="mdescLeft">&#160;</td><td class="mdescRight">FIT File data (alternative to <code>device</code>). <br /></td></tr>
<tr class="separator:a200ad0a1cb1dda3cbe03f3c47bf1293d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81ab38ab6097d7de6e2d39ba57517272"><td class="memItemLeft" align="right" valign="top"><a id="a81ab38ab6097d7de6e2d39ba57517272"></a>
<a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a81ab38ab6097d7de6e2d39ba57517272">dataOffset</a></td></tr>
<tr class="memdesc:a81ab38ab6097d7de6e2d39ba57517272"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current position within <code>data</code>. <br /></td></tr>
<tr class="separator:a81ab38ab6097d7de6e2d39ba57517272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a174b6b45ff54f0b149b59aebdb8061b5"><td class="memItemLeft" align="right" valign="top"><a id="a174b6b45ff54f0b149b59aebdb8061b5"></a>
QIODevice *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a></td></tr>
<tr class="memdesc:a174b6b45ff54f0b149b59aebdb8061b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">FIT File IO stream (alternative to <code>data</code> and <code>dataOffset</code>). <br /></td></tr>
<tr class="separator:a174b6b45ff54f0b149b59aebdb8061b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a645af0c055d34bd02b2034b3d9db62c6"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a645af0c055d34bd02b2034b3d9db62c6"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">size_t</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a645af0c055d34bd02b2034b3d9db62c6">bytesAvailable</a> () const</td></tr>
<tr class="memdesc:a645af0c055d34bd02b2034b3d9db62c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of bytes currently available for reading.  <a href="classFitStreamReaderPrivate.html#a645af0c055d34bd02b2034b3d9db62c6">More...</a><br /></td></tr>
<tr class="separator:a645af0c055d34bd02b2034b3d9db62c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae158e9d75149893030cedf1b13d6b07b"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:ae158e9d75149893030cedf1b13d6b07b"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#ae158e9d75149893030cedf1b13d6b07b">parseFileHeader</a> ()</td></tr>
<tr class="memdesc:ae158e9d75149893030cedf1b13d6b07b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads and parses the FIT stream's file header.  <a href="classFitStreamReaderPrivate.html#ae158e9d75149893030cedf1b13d6b07b">More...</a><br /></td></tr>
<tr class="separator:ae158e9d75149893030cedf1b13d6b07b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dd45f588b8ecb89cc8968c6c5d0381f"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a1dd45f588b8ecb89cc8968c6c5d0381f"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a1dd45f588b8ecb89cc8968c6c5d0381f">parseDefinitionMessage</a> ()</td></tr>
<tr class="memdesc:a1dd45f588b8ecb89cc8968c6c5d0381f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads and parses a FIT Definition Message.  <a href="classFitStreamReaderPrivate.html#a1dd45f588b8ecb89cc8968c6c5d0381f">More...</a><br /></td></tr>
<tr class="separator:a1dd45f588b8ecb89cc8968c6c5d0381f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c08b06daf62ca841e563d3582da44da"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a4c08b06daf62ca841e563d3582da44da"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classAbstractDataMessage.html">AbstractDataMessage</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a4c08b06daf62ca841e563d3582da44da">parseDataMessage</a> ()</td></tr>
<tr class="memdesc:a4c08b06daf62ca841e563d3582da44da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads and parses a FIT Data Message.  <a href="classFitStreamReaderPrivate.html#a4c08b06daf62ca841e563d3582da44da">More...</a><br /></td></tr>
<tr class="separator:a4c08b06daf62ca841e563d3582da44da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3620f5924ca30eecc7890dd1ac7cba9f"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a3620f5924ca30eecc7890dd1ac7cba9f"><td class="memTemplItemLeft" align="right" valign="top">quint8&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a3620f5924ca30eecc7890dd1ac7cba9f">peekByte</a> (const int pos=0) const</td></tr>
<tr class="memdesc:a3620f5924ca30eecc7890dd1ac7cba9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peeks the next <em>pos'th</em> byte in the FIT stream.  <a href="classFitStreamReaderPrivate.html#a3620f5924ca30eecc7890dd1ac7cba9f">More...</a><br /></td></tr>
<tr class="separator:a3620f5924ca30eecc7890dd1ac7cba9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e3e6cca8318f9f076e45bf6e87b452"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:ae2e3e6cca8318f9f076e45bf6e87b452"><td class="memTemplItemLeft" align="right" valign="top">QByteArray&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#ae2e3e6cca8318f9f076e45bf6e87b452">readBytes</a> (const <a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">size_t</a> size)</td></tr>
<tr class="memdesc:ae2e3e6cca8318f9f076e45bf6e87b452"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the next <em>size</em> bytes from the FIT stream.  <a href="classFitStreamReaderPrivate.html#ae2e3e6cca8318f9f076e45bf6e87b452">More...</a><br /></td></tr>
<tr class="separator:ae2e3e6cca8318f9f076e45bf6e87b452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6521cfb558bd434888d4d90db166612b"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a6521cfb558bd434888d4d90db166612b"><td class="memTemplItemLeft" align="right" valign="top">QByteArray&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a6521cfb558bd434888d4d90db166612b">readFileHeader</a> ()</td></tr>
<tr class="memdesc:a6521cfb558bd434888d4d90db166612b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads all bytes of the FIT stream file header.  <a href="classFitStreamReaderPrivate.html#a6521cfb558bd434888d4d90db166612b">More...</a><br /></td></tr>
<tr class="separator:a6521cfb558bd434888d4d90db166612b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fe05991aa88701417151c05781871c4"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a0fe05991aa88701417151c05781871c4"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classAbstractDataMessage.html">AbstractDataMessage</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a0fe05991aa88701417151c05781871c4">readNextDataMessage</a> ()</td></tr>
<tr class="memdesc:a0fe05991aa88701417151c05781871c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads up to, and including, the next FIT Data Message.  <a href="classFitStreamReaderPrivate.html#a0fe05991aa88701417151c05781871c4">More...</a><br /></td></tr>
<tr class="separator:a0fe05991aa88701417151c05781871c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fd7e97c0d181adad6fce9e3385beee4"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:a9fd7e97c0d181adad6fce9e3385beee4"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">FitStreamReaderPrivate::size_t</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a9fd7e97c0d181adad6fce9e3385beee4">bytesAvailable</a> () const</td></tr>
<tr class="memdesc:a9fd7e97c0d181adad6fce9e3385beee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialisation for reading from QByteArray objects.  <a href="classFitStreamReaderPrivate.html#a9fd7e97c0d181adad6fce9e3385beee4">More...</a><br /></td></tr>
<tr class="separator:a9fd7e97c0d181adad6fce9e3385beee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fd7e97c0d181adad6fce9e3385beee4"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:a9fd7e97c0d181adad6fce9e3385beee4"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">FitStreamReaderPrivate::size_t</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a9fd7e97c0d181adad6fce9e3385beee4">bytesAvailable</a> () const</td></tr>
<tr class="memdesc:a9fd7e97c0d181adad6fce9e3385beee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialisation for reading from QIODevice streams.  <a href="classFitStreamReaderPrivate.html#a9fd7e97c0d181adad6fce9e3385beee4">More...</a><br /></td></tr>
<tr class="separator:a9fd7e97c0d181adad6fce9e3385beee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa440677b40bab68dd12743b09bc23a3c"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:aa440677b40bab68dd12743b09bc23a3c"><td class="memTemplItemLeft" align="right" valign="top">quint8&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#aa440677b40bab68dd12743b09bc23a3c">peekByte</a> (const int pos) const</td></tr>
<tr class="memdesc:aa440677b40bab68dd12743b09bc23a3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialisation for reading from QByteArray objects.  <a href="classFitStreamReaderPrivate.html#aa440677b40bab68dd12743b09bc23a3c">More...</a><br /></td></tr>
<tr class="separator:aa440677b40bab68dd12743b09bc23a3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa440677b40bab68dd12743b09bc23a3c"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:aa440677b40bab68dd12743b09bc23a3c"><td class="memTemplItemLeft" align="right" valign="top">quint8&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#aa440677b40bab68dd12743b09bc23a3c">peekByte</a> (const int pos) const</td></tr>
<tr class="memdesc:aa440677b40bab68dd12743b09bc23a3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialisation for reading from QIODevice streams.  <a href="classFitStreamReaderPrivate.html#aa440677b40bab68dd12743b09bc23a3c">More...</a><br /></td></tr>
<tr class="separator:aa440677b40bab68dd12743b09bc23a3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa00709ad70b4e3fb322093813901f7ef"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:aa00709ad70b4e3fb322093813901f7ef"><td class="memTemplItemLeft" align="right" valign="top">QByteArray&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#aa00709ad70b4e3fb322093813901f7ef">readBytes</a> (const <a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">size_t</a> size)</td></tr>
<tr class="memdesc:aa00709ad70b4e3fb322093813901f7ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialisation for reading from QIODevice streams.  <a href="classFitStreamReaderPrivate.html#aa00709ad70b4e3fb322093813901f7ef">More...</a><br /></td></tr>
<tr class="separator:aa00709ad70b4e3fb322093813901f7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa00709ad70b4e3fb322093813901f7ef"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:aa00709ad70b4e3fb322093813901f7ef"><td class="memTemplItemLeft" align="right" valign="top">QByteArray&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#aa00709ad70b4e3fb322093813901f7ef">readBytes</a> (const <a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">size_t</a> size)</td></tr>
<tr class="memdesc:aa00709ad70b4e3fb322093813901f7ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialisation for reading from QIODevice streams.  <a href="classFitStreamReaderPrivate.html#aa00709ad70b4e3fb322093813901f7ef">More...</a><br /></td></tr>
<tr class="separator:aa00709ad70b4e3fb322093813901f7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a4aa9e9225c85c1a34d28e700f9d55565"><td class="memItemLeft" align="right" valign="top">static quint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a4aa9e9225c85c1a34d28e700f9d55565">fitChecksum</a> (const QByteArray &amp;<a class="el" href="classFitStreamReaderPrivate.html#a200ad0a1cb1dda3cbe03f3c47bf1293d">data</a>)</td></tr>
<tr class="memdesc:a4aa9e9225c85c1a34d28e700f9d55565"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates a checksum, as per the algorithm used by FIT file headers.  <a href="classFitStreamReaderPrivate.html#a4aa9e9225c85c1a34d28e700f9d55565">More...</a><br /></td></tr>
<tr class="separator:a4aa9e9225c85c1a34d28e700f9d55565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a5399efd9c35426756598773cacd14e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a1a5399efd9c35426756598773cacd14e">isDefinitionMessage</a> (const quint8 recordHeader)</td></tr>
<tr class="memdesc:a1a5399efd9c35426756598773cacd14e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns <code>true</code> if <em>recordHeader</em> indicates a Definition Message, otherwise <code>false</code>.  <a href="classFitStreamReaderPrivate.html#a1a5399efd9c35426756598773cacd14e">More...</a><br /></td></tr>
<tr class="separator:a1a5399efd9c35426756598773cacd14e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a436a4c871038b019748da2df179b8605"><td class="memItemLeft" align="right" valign="top"><a id="a436a4c871038b019748da2df179b8605"></a>
<a class="el" href="classFitStreamReader.html">FitStreamReader</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a436a4c871038b019748da2df179b8605">q_ptr</a></td></tr>
<tr class="memdesc:a436a4c871038b019748da2df179b8605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal q-pointer. <br /></td></tr>
<tr class="separator:a436a4c871038b019748da2df179b8605"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a784dba2fad2b19065b295ef4ba1399e9"><td class="memItemLeft" align="right" valign="top"><a id="a784dba2fad2b19065b295ef4ba1399e9"></a>
QVersionNumber&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a784dba2fad2b19065b295ef4ba1399e9">protocolVersion</a></td></tr>
<tr class="memdesc:a784dba2fad2b19065b295ef4ba1399e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Protocol version read from the parsed FIT file header. <br /></td></tr>
<tr class="separator:a784dba2fad2b19065b295ef4ba1399e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a536f735ae4c3d6371efa3e3e0414d172"><td class="memItemLeft" align="right" valign="top"><a id="a536f735ae4c3d6371efa3e3e0414d172"></a>
QVersionNumber&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a536f735ae4c3d6371efa3e3e0414d172">profileVersion</a></td></tr>
<tr class="memdesc:a536f735ae4c3d6371efa3e3e0414d172"><td class="mdescLeft">&#160;</td><td class="mdescRight">Protocol version read from the parsed FIT file header. <br /></td></tr>
<tr class="separator:a536f735ae4c3d6371efa3e3e0414d172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039a774c86525f7b281b7e39efa385ca"><td class="memItemLeft" align="right" valign="top"><a id="a039a774c86525f7b281b7e39efa385ca"></a>
quint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a039a774c86525f7b281b7e39efa385ca">expectedDataSize</a></td></tr>
<tr class="memdesc:a039a774c86525f7b281b7e39efa385ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total size, in bytes, expected to comprise the FIT file. <br /></td></tr>
<tr class="separator:a039a774c86525f7b281b7e39efa385ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91ebd356ba83d48350db239f61a745a5"><td class="memItemLeft" align="right" valign="top"><a id="a91ebd356ba83d48350db239f61a745a5"></a>
QHash&lt; int, <a class="el" href="structDataDefinition.html">DataDefinition</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#a91ebd356ba83d48350db239f61a745a5">dataDefinitions</a></td></tr>
<tr class="memdesc:a91ebd356ba83d48350db239f61a745a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Local message types to current data definitions. <br /></td></tr>
<tr class="separator:a91ebd356ba83d48350db239f61a745a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbbf3cc4771b3c86203adb7dbd0c58d3"><td class="memItemLeft" align="right" valign="top"><a id="afbbf3cc4771b3c86203adb7dbd0c58d3"></a>
QHash&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitStreamReaderPrivate.html#afbbf3cc4771b3c86203adb7dbd0c58d3">recordSizes</a></td></tr>
<tr class="memdesc:afbbf3cc4771b3c86203adb7dbd0c58d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Local message types to current record sizes. <br /></td></tr>
<tr class="separator:afbbf3cc4771b3c86203adb7dbd0c58d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides private implementation for <a class="el" href="classFitStreamReader.html" title="The FitStreamReader class provides a streaming parser for reading Garmin FIT files.">FitStreamReader</a>. </p>

<p class="definition">Definition at line <a class="el" href="fitstreamreader__p_8h_source.html#l00040">40</a> of file <a class="el" href="fitstreamreader__p_8h_source.html">fitstreamreader_p.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9f2a362d5d4b06ee6843594e7132e8c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f2a362d5d4b06ee6843594e7132e8c3">&#9670;&nbsp;</a></span>FitStreamReaderPrivate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FitStreamReaderPrivate::FitStreamReaderPrivate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFitStreamReader.html">FitStreamReader</a> *const&#160;</td>
          <td class="paramname"><em>q</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="classFitStreamReaderPrivate.html" title="Provides private implementation for FitStreamReader.">FitStreamReaderPrivate</a> object, with public implementation <em>q</em>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>Pointer to public implementation. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00267">267</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    : <a class="code" href="classFitStreamReaderPrivate.html#a81ab38ab6097d7de6e2d39ba57517272">dataOffset</a>(0), <a class="code" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a>(<span class="keyword">nullptr</span>), <a class="code" href="classFitStreamReaderPrivate.html#a436a4c871038b019748da2df179b8605">q_ptr</a>(q)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;{</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="ttc" id="aclassFitStreamReaderPrivate_html_a174b6b45ff54f0b149b59aebdb8061b5"><div class="ttname"><a href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">FitStreamReaderPrivate::device</a></div><div class="ttdeci">QIODevice * device</div><div class="ttdoc">FIT File IO stream (alternative to data and dataOffset).</div><div class="ttdef"><b>Definition:</b> <a href="fitstreamreader__p_8h_source.html#l00051">fitstreamreader_p.h:51</a></div></div>
<div class="ttc" id="aclassFitStreamReaderPrivate_html_a436a4c871038b019748da2df179b8605"><div class="ttname"><a href="classFitStreamReaderPrivate.html#a436a4c871038b019748da2df179b8605">FitStreamReaderPrivate::q_ptr</a></div><div class="ttdeci">FitStreamReader *const q_ptr</div><div class="ttdoc">Internal q-pointer.</div><div class="ttdef"><b>Definition:</b> <a href="fitstreamreader__p_8h_source.html#l00057">fitstreamreader_p.h:57</a></div></div>
<div class="ttc" id="aclassFitStreamReaderPrivate_html_a81ab38ab6097d7de6e2d39ba57517272"><div class="ttname"><a href="classFitStreamReaderPrivate.html#a81ab38ab6097d7de6e2d39ba57517272">FitStreamReaderPrivate::dataOffset</a></div><div class="ttdeci">size_t dataOffset</div><div class="ttdoc">Current position within data.</div><div class="ttdef"><b>Definition:</b> <a href="fitstreamreader__p_8h_source.html#l00050">fitstreamreader_p.h:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9fd7e97c0d181adad6fce9e3385beee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fd7e97c0d181adad6fce9e3385beee4">&#9670;&nbsp;</a></span>bytesAvailable() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">FitStreamReaderPrivate::size_t</a> FitStreamReaderPrivate::bytesAvailable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specialisation for reading from QByteArray objects. </p>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes available for reading. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00294">294</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;{</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    Q_ASSERT(<a class="code" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a> == <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classFitStreamReaderPrivate.html#a200ad0a1cb1dda3cbe03f3c47bf1293d">data</a>.size() - <a class="code" href="classFitStreamReaderPrivate.html#a81ab38ab6097d7de6e2d39ba57517272">dataOffset</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div>
<div class="ttc" id="aclassFitStreamReaderPrivate_html_a200ad0a1cb1dda3cbe03f3c47bf1293d"><div class="ttname"><a href="classFitStreamReaderPrivate.html#a200ad0a1cb1dda3cbe03f3c47bf1293d">FitStreamReaderPrivate::data</a></div><div class="ttdeci">QByteArray data</div><div class="ttdoc">FIT File data (alternative to device).</div><div class="ttdef"><b>Definition:</b> <a href="fitstreamreader__p_8h_source.html#l00049">fitstreamreader_p.h:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fitstreamreader__p_8h_source.html#l00049">data</a>, <a class="el" href="fitstreamreader__p_8h_source.html#l00050">dataOffset</a>, and <a class="el" href="fitstreamreader__p_8h_source.html#l00051">device</a>.</p>

</div>
</div>
<a id="a9fd7e97c0d181adad6fce9e3385beee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fd7e97c0d181adad6fce9e3385beee4">&#9670;&nbsp;</a></span>bytesAvailable() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">FitStreamReaderPrivate::size_t</a> FitStreamReaderPrivate::bytesAvailable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specialisation for reading from QIODevice streams. </p>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes available for reading. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00305">305</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;{</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    Q_ASSERT(<a class="code" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a>-&gt;bytesAvailable();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fitstreamreader__p_8h_source.html#l00051">device</a>.</p>

</div>
</div>
<a id="a645af0c055d34bd02b2034b3d9db62c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a645af0c055d34bd02b2034b3d9db62c6">&#9670;&nbsp;</a></span>bytesAvailable() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FitStreamReaderPrivate::bytesAvailable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the number of bytes currently available for reading. </p>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes available for reading. </dd></dl>

</div>
</div>
<a id="a4aa9e9225c85c1a34d28e700f9d55565"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4aa9e9225c85c1a34d28e700f9d55565">&#9670;&nbsp;</a></span>fitChecksum()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">quint16 FitStreamReaderPrivate::fitChecksum </td>
          <td>(</td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates a checksum, as per the algorithm used by FIT file headers. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000012">Todo:</a></b></dt><dd>Move this somewhere appropriate; its not specific to <a class="el" href="classFitStreamReader.html" title="The FitStreamReader class provides a streaming parser for reading Garmin FIT files.">FitStreamReader</a>, but rather would be useful eventually for a FitStreamWriter class too. I guess its safe to keep in a private class for now, so it can then be moved without affecting the library's binary interface.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>FIT file header to calculate the checksum for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>16-bit checksum for <em>data</em>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00678">678</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;{</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    quint16 checksum=0;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<span class="keywordtype">byte</span>: <a class="code" href="classFitStreamReaderPrivate.html#a200ad0a1cb1dda3cbe03f3c47bf1293d">data</a>) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> quint16 crcTable[16] = {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            0x0000, 0xCC01, 0xD801, 0x1400, 0xF001, 0x3C00, 0x2800, 0xE401,</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            0xA001, 0x6C00, 0x7800, 0xB401, 0x5000, 0x9C01, 0x8801, 0x4400</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        };</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> byteShift=0; byteShift&lt;=4; byteShift+=4) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keyword">const</span> quint16 tmp = crcTable[checksum &amp; 0xF];</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            checksum = (checksum &gt;&gt; 4) &amp; 0x0FFF;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            checksum = checksum ^ tmp ^ crcTable[(<span class="keywordtype">byte</span> &gt;&gt; byteShift) &amp; 0xF];</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">return</span> checksum;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fitstreamreader__p_8h_source.html#l00049">data</a>.</p>

<p class="reference">Referenced by <a class="el" href="fitstreamreader_8cpp_source.html#l00319">parseFileHeader()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classFitStreamReaderPrivate_a4aa9e9225c85c1a34d28e700f9d55565_icgraph.svg" width="414" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a1a5399efd9c35426756598773cacd14e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a5399efd9c35426756598773cacd14e">&#9670;&nbsp;</a></span>isDefinitionMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool FitStreamReaderPrivate::isDefinitionMessage </td>
          <td>(</td>
          <td class="paramtype">const quint8&#160;</td>
          <td class="paramname"><em>recordHeader</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns <code>true</code> if <em>recordHeader</em> indicates a Definition Message, otherwise <code>false</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recordHeader</td><td>A FIT Data Record header byte.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if <em>recordHeader</em> indicates a Definition Message, otherwise <code>false</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00702">702</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;{</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// For definition messages, bit 7 must be off (bit 7 on would indicate a Compressed Timestamp</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="comment">// Data Message, which cannot be a Definition Message), and bit 6 must be on (otherwise this</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">// woud be a Normal Data Message, not a Definition Message).</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">return</span> ((recordHeader &gt;&gt; 6) == 1); <span class="comment">// Match bit 7 on and 6 off; ie 01xxxxxx.</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="fitstreamreader_8cpp_source.html#l00493">parseDataMessage()</a>, <a class="el" href="fitstreamreader_8cpp_source.html#l00388">parseDefinitionMessage()</a>, and <a class="el" href="fitstreamreader_8cpp_source.html#l00649">readNextDataMessage()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classFitStreamReaderPrivate_a1a5399efd9c35426756598773cacd14e_icgraph.svg" width="423" height="183"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4c08b06daf62ca841e563d3582da44da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c08b06daf62ca841e563d3582da44da">&#9670;&nbsp;</a></span>parseDataMessage()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAbstractDataMessage.html">AbstractDataMessage</a> * FitStreamReaderPrivate::parseDataMessage</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads and parses a FIT Data Message. </p>
<p>Note, this function assumes that the next item in the FIT stream is indeed a Data Message (the caller should have already determined this). Though it is perfectly acceptable that the message may not be completely available yet (in which case <code>false</code> will be returned).</p>
<p>This fuction will, as part of decoding the message, look-up the Data Message's definition, which must have been stored previously by one or more Definition Messages being processed earlier. If no matching definition is found, <code>false</code> will be returned.</p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the Data Message was successfully read and parsed, <code>false</code> otherwise. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000010">Todo:</a></b></dt><dd>Process timeOffset. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000011">Todo:</a></b></dt><dd>Set error code. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00493">493</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    Q_ASSERT(bytesAvailable&lt;T&gt;());</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    qDebug() &lt;&lt; <span class="stringliteral">&quot;parsing data message&quot;</span>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keyword">const</span> quint8 recordHeader = peekByte&lt;T&gt;();</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;recordHeader&quot;</span> &lt;&lt; recordHeader;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    Q_ASSERT_X(!<a class="code" href="classFitStreamReaderPrivate.html#a1a5399efd9c35426756598773cacd14e">isDefinitionMessage</a>(recordHeader), <span class="stringliteral">&quot;parseDataMessage&quot;</span>,</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;               <span class="stringliteral">&quot;FIT record header does not indiciate a data message&quot;</span>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// Parse the record header.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    quint8 localMessageType;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (recordHeader &amp; (1 &lt;&lt; 7)) { <span class="comment">// Compressed Timestamp Header.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;Compressed Timestamp Header&quot;</span>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        localMessageType = ((recordHeader &gt;&gt; 4) &amp; 0x7);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keyword">const</span> quint8 timeOffset = (recordHeader &amp; 0xF);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        qDebug() &lt;&lt; <span class="stringliteral">&quot;time offset&quot;</span> &lt;&lt; timeOffset;<span class="comment"></span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">        /// \todo Process timeOffset.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment"></span>    } <span class="keywordflow">else</span> { <span class="comment">// Normal (Data Message) Header</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;Normal (Data Message) Header&quot;</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;reserved5&quot;</span> &lt;&lt; (recordHeader &amp; (1 &lt;&lt; 5));</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;reserved4&quot;</span> &lt;&lt; (recordHeader &amp; (1 &lt;&lt; 4));</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        localMessageType = (recordHeader &amp; 0xF); <span class="comment">// Least significant 4 bits.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;local message type&quot;</span> &lt;&lt; localMessageType;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">// Lookup the record&#39;s field definitions.</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classFitStreamReaderPrivate.html#a91ebd356ba83d48350db239f61a745a5">dataDefinitions</a>.contains(localMessageType)) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        qWarning() &lt;&lt; <span class="stringliteral">&quot;No definition for local message type&quot;</span> &lt;&lt; localMessageType;<span class="comment"></span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">        /// \todo Set error code.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"></span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// FIT data is corrupt; we cannot safely continue parsing.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keyword">const</span> <a class="code" href="structDataDefinition.html">DataDefinition</a> defn = <a class="code" href="classFitStreamReaderPrivate.html#a91ebd356ba83d48350db239f61a745a5">dataDefinitions</a>.value(localMessageType);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">// Parse record&#39;s Data Fields.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;record size&quot;</span> &lt;&lt; defn.<a class="code" href="structDataDefinition.html#a970e98ec5a59edbea60452eadb71231a">recordSize</a>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> (defn.<a class="code" href="structDataDefinition.html#a970e98ec5a59edbea60452eadb71231a">recordSize</a> == 0) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        qWarning() &lt;&lt; <span class="stringliteral">&quot;record size is zero&quot;</span>; <span class="comment">// Not really sure what to do here.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keyword">const</span> QByteArray record = readBytes&lt;T&gt;(defn.<a class="code" href="structDataDefinition.html#a970e98ec5a59edbea60452eadb71231a">recordSize</a>+1);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">if</span> (record.isEmpty()) {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Not enough bytes.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    qDebug() &lt;&lt; <span class="stringliteral">&quot;record&quot;</span> &lt;&lt; record.mid(1);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classAbstractDataMessage.html#af4fbf27d7c622819e6ad37e75f3bae8a">AbstractDataMessage::fromData</a>(&amp;defn, record.mid(1));</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div>
<div class="ttc" id="aclassAbstractDataMessage_html_af4fbf27d7c622819e6ad37e75f3bae8a"><div class="ttname"><a href="classAbstractDataMessage.html#af4fbf27d7c622819e6ad37e75f3bae8a">AbstractDataMessage::fromData</a></div><div class="ttdeci">static AbstractDataMessage * fromData(const DataDefinition *const defn, const QByteArray &amp;record)</div><div class="ttdoc">Constructs the relevant AbstractDataMessage-derived class to parse record according to defn.</div><div class="ttdef"><b>Definition:</b> <a href="fitdatamessages_8cpp_source.html#l00139">fitdatamessages.cpp:139</a></div></div>
<div class="ttc" id="aclassFitStreamReaderPrivate_html_a1a5399efd9c35426756598773cacd14e"><div class="ttname"><a href="classFitStreamReaderPrivate.html#a1a5399efd9c35426756598773cacd14e">FitStreamReaderPrivate::isDefinitionMessage</a></div><div class="ttdeci">static bool isDefinitionMessage(const quint8 recordHeader)</div><div class="ttdoc">Returns true if recordHeader indicates a Definition Message, otherwise false.</div><div class="ttdef"><b>Definition:</b> <a href="fitstreamreader_8cpp_source.html#l00702">fitstreamreader.cpp:702</a></div></div>
<div class="ttc" id="aclassFitStreamReaderPrivate_html_a91ebd356ba83d48350db239f61a745a5"><div class="ttname"><a href="classFitStreamReaderPrivate.html#a91ebd356ba83d48350db239f61a745a5">FitStreamReaderPrivate::dataDefinitions</a></div><div class="ttdeci">QHash&lt; int, DataDefinition &gt; dataDefinitions</div><div class="ttdoc">Local message types to current data definitions.</div><div class="ttdef"><b>Definition:</b> <a href="fitstreamreader__p_8h_source.html#l00078">fitstreamreader_p.h:78</a></div></div>
<div class="ttc" id="astructDataDefinition_html"><div class="ttname"><a href="structDataDefinition.html">DataDefinition</a></div><div class="ttdoc">Data Message definition.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00083">types_p.h:83</a></div></div>
<div class="ttc" id="astructDataDefinition_html_a970e98ec5a59edbea60452eadb71231a"><div class="ttname"><a href="structDataDefinition.html#a970e98ec5a59edbea60452eadb71231a">DataDefinition::recordSize</a></div><div class="ttdeci">int recordSize</div><div class="ttdoc">Total size, in byetes, of all fields in the described Data Message.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00101">types_p.h:101</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fitstreamreader__p_8h_source.html#l00078">dataDefinitions</a>, <a class="el" href="fitdatamessages_8cpp_source.html#l00139">AbstractDataMessage::fromData()</a>, <a class="el" href="fitstreamreader_8cpp_source.html#l00702">isDefinitionMessage()</a>, and <a class="el" href="types__p_8h_source.html#l00101">DataDefinition::recordSize</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classFitStreamReaderPrivate_a4c08b06daf62ca841e563d3582da44da_cgraph.svg" width="414" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a1dd45f588b8ecb89cc8968c6c5d0381f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dd45f588b8ecb89cc8968c6c5d0381f">&#9670;&nbsp;</a></span>parseDefinitionMessage()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool FitStreamReaderPrivate::parseDefinitionMessage</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads and parses a FIT Definition Message. </p>
<p>Note, this function assumes that the next item in the FIT stream is indeed a Definition Message (the caller should have already determined this). Though it is perfectly acceptable that the message may not be completely available yet (in which case <code>false</code> will be returned).</p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the Definition Message was successfully read and parsed, <code>false</code> otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00388">388</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;{</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">// Parse the record header.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    qDebug() &lt;&lt; <span class="stringliteral">&quot;parsing definition message&quot;</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    Q_ASSERT(bytesAvailable&lt;T&gt;());</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">const</span> quint8 recordHeader = peekByte&lt;T&gt;();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;recordHeader&quot;</span> &lt;&lt; recordHeader;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    Q_ASSERT_X(<a class="code" href="classFitStreamReaderPrivate.html#a1a5399efd9c35426756598773cacd14e">isDefinitionMessage</a>(recordHeader), <span class="stringliteral">&quot;parseDefinitionMessage&quot;</span>,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;               <span class="stringliteral">&quot;FIT record header does not indiciate a definition message&quot;</span>);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> hasDevFields = (recordHeader &amp; (1 &lt;&lt; 5));</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;has dev fields&quot;</span> &lt;&lt; hasDevFields;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;reserved&quot;</span> &lt;&lt; (recordHeader &amp; (1 &lt;&lt; 4));</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keyword">const</span> quint8 localMessageType = (recordHeader &amp; 0xF); <span class="comment">// Least significant 4 bits.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;local message type&quot;</span> &lt;&lt; localMessageType;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// Read the completed definition record (if available).</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">if</span> (bytesAvailable&lt;T&gt;() &lt; 6) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Not enough bytes.</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keyword">const</span> quint8 numberOfFields = peekByte&lt;T&gt;(5);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;number of fields&quot;</span> &lt;&lt; numberOfFields;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordtype">int</span> numberOfDevFields = 0;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">if</span> (hasDevFields) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> offsetToNumberOfDevFields = 6 + (numberOfFields * 3);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;offset to number of dev fields&quot;</span> &lt;&lt; offsetToNumberOfDevFields;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">if</span> (bytesAvailable&lt;T&gt;() &lt; offsetToNumberOfDevFields) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Not enough bytes.</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        numberOfDevFields = peekByte&lt;T&gt;(offsetToNumberOfDevFields);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> recordSize = 6 + (numberOfFields * 3) + (hasDevFields ? 1 + (numberOfDevFields * 3) : 0);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;number of dev fields&quot;</span> &lt;&lt; numberOfDevFields;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;record size&quot;</span> &lt;&lt; recordSize;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keyword">const</span> QByteArray record = readBytes&lt;T&gt;(recordSize);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (record.isEmpty()) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Not enough bytes.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// Parse the rest of the definition record.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="structDataDefinition.html">DataDefinition</a> defn;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    defn.<a class="code" href="structDataDefinition.html#a970e98ec5a59edbea60452eadb71231a">recordSize</a> = 0;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    defn.<a class="code" href="structDataDefinition.html#ac48daaed22d72cd8a025c6c13c455b99">architecture</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="types__p_8h.html#a9d29ee6d65ece8256e068c11186a92e8">Architecture</a><span class="keyword">&gt;</span>(record.at(2));</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;architecture&quot;</span> &lt;&lt; (int)defn.<a class="code" href="structDataDefinition.html#ac48daaed22d72cd8a025c6c13c455b99">architecture</a>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    qDebug() &lt;&lt; record.mid(3,2);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    defn.<a class="code" href="structDataDefinition.html#acdf8d52c19ad998b469e68d3fc1b7ddd">globalMessageNumber</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="types_8h.html#aac99da303e65f2fd0821198e4b6cf22c">MesgNum</a><span class="keyword">&gt;</span>((defn.<a class="code" href="structDataDefinition.html#ac48daaed22d72cd8a025c6c13c455b99">architecture</a> == <a class="code" href="types__p_8h.html#a9d29ee6d65ece8256e068c11186a92e8a2ce7a92ae43763828ac4acb4560c2a5b">Architecture::BigEndian</a>)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        ? qFromBigEndian&lt;quint16&gt;(record.mid(3,2))</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        : qFromLittleEndian&lt;quint16&gt;(record.mid(3,2)));</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;header&quot;</span> &lt;&lt; (quint8)record.at(0);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;reserved&quot;</span> &lt;&lt; (quint8)record.at(1);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;msgNum&quot;</span> &lt;&lt; (int)defn.<a class="code" href="structDataDefinition.html#acdf8d52c19ad998b469e68d3fc1b7ddd">globalMessageNumber</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// Parse the definition fields.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    for (<span class="keywordtype">int</span> i=0; i &lt; numberOfFields; ++i) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> pos = 6 + (i * 3);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <a class="code" href="structFieldDefinition.html">FieldDefinition</a> field;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        field.<a class="code" href="structFieldDefinition.html#a62afa0ec7bb936c3a543949b7cd2a2af">number</a> = record.at(pos);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        field.<a class="code" href="structFieldDefinition.html#aad2191d20cf144ff378cda5b32ca1a4e">size</a> = record.at(pos+1);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        field.<a class="code" href="structFieldDefinition.html#a3856a9546c68e23d961f1727aa9da60b">baseType</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="types_8h.html#a762f1a1f27964f1fef3bf145d49adf05">FitBaseType</a><span class="keyword">&gt;</span>(record.at(pos+2));</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;field&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;number&quot;</span> &lt;&lt; field.<a class="code" href="structFieldDefinition.html#a62afa0ec7bb936c3a543949b7cd2a2af">number</a>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;field&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;size&quot;</span> &lt;&lt; field.<a class="code" href="structFieldDefinition.html#aad2191d20cf144ff378cda5b32ca1a4e">size</a>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;field&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;type&quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span>quint8<span class="keyword">&gt;</span>(field.<a class="code" href="structFieldDefinition.html#a3856a9546c68e23d961f1727aa9da60b">baseType</a>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        defn.<a class="code" href="structDataDefinition.html#a365c81347c77b8bfa3963bf46061061e">fieldDefinitions</a>.append(field);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        defn.<a class="code" href="structDataDefinition.html#a970e98ec5a59edbea60452eadb71231a">recordSize</a> += field.<a class="code" href="structFieldDefinition.html#aad2191d20cf144ff378cda5b32ca1a4e">size</a>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    Q_ASSERT(defn.<a class="code" href="structDataDefinition.html#a365c81347c77b8bfa3963bf46061061e">fieldDefinitions</a>.size() == numberOfFields);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;defn record size&quot;</span> &lt;&lt; defn.<a class="code" href="structDataDefinition.html#a970e98ec5a59edbea60452eadb71231a">recordSize</a>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// Parse the definition fields.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    Q_ASSERT(hasDevFields || (numberOfDevFields == 0));</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; numberOfDevFields; ++i) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> pos = 6 + (numberOfFields * 3) + 1 + (i * 3);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <a class="code" href="structDeveloperFieldDefinition.html">DeveloperFieldDefinition</a> field;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        field.<a class="code" href="structDeveloperFieldDefinition.html#a0cdc4a4b6f65cafba216ff551f308001">fieldNumber</a> = record.at(pos);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        field.<a class="code" href="structDeveloperFieldDefinition.html#a449a9c8747def15719597d27ae7ed00b">size</a> = record.at(pos+1);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        field.<a class="code" href="structDeveloperFieldDefinition.html#a5d607b902765d25b429a423e3206ff11">devDataIndex</a> = record.at(pos+2);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;dev field&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;number&quot;</span> &lt;&lt; field.<a class="code" href="structDeveloperFieldDefinition.html#a0cdc4a4b6f65cafba216ff551f308001">fieldNumber</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;dev field&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;size&quot;</span> &lt;&lt; field.<a class="code" href="structDeveloperFieldDefinition.html#a449a9c8747def15719597d27ae7ed00b">size</a>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;dev field&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;dataIndex&quot;</span> &lt;&lt; field.<a class="code" href="structDeveloperFieldDefinition.html#a5d607b902765d25b429a423e3206ff11">devDataIndex</a>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        defn.<a class="code" href="structDataDefinition.html#a4394ff8628ff9d764cdcb536ef36b3c6">developerFieldDefinitions</a>.append(field);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        defn.<a class="code" href="structDataDefinition.html#a970e98ec5a59edbea60452eadb71231a">recordSize</a> += field.<a class="code" href="structDeveloperFieldDefinition.html#a449a9c8747def15719597d27ae7ed00b">size</a>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    Q_ASSERT(defn.<a class="code" href="structDataDefinition.html#a4394ff8628ff9d764cdcb536ef36b3c6">developerFieldDefinitions</a>.size() == numberOfDevFields);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    qDebug() &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;defn record size&quot;</span> &lt;&lt; defn.<a class="code" href="structDataDefinition.html#a970e98ec5a59edbea60452eadb71231a">recordSize</a>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">if</span> (defn.<a class="code" href="structDataDefinition.html#a970e98ec5a59edbea60452eadb71231a">recordSize</a> == 0) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        qWarning() &lt;&lt; <span class="stringliteral">&quot;defintion record size is zero&quot;</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">// Record the definition data for future Data Messages.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="classFitStreamReaderPrivate.html#a91ebd356ba83d48350db239f61a745a5">dataDefinitions</a>.insert(localMessageType, defn);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;}</div>
<div class="ttc" id="astructDataDefinition_html_a365c81347c77b8bfa3963bf46061061e"><div class="ttname"><a href="structDataDefinition.html#a365c81347c77b8bfa3963bf46061061e">DataDefinition::fieldDefinitions</a></div><div class="ttdeci">QList&lt; FieldDefinition &gt; fieldDefinitions</div><div class="ttdoc">Definitons list of all fields, if any, present in the described Data Message.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00088">types_p.h:88</a></div></div>
<div class="ttc" id="astructDataDefinition_html_a4394ff8628ff9d764cdcb536ef36b3c6"><div class="ttname"><a href="structDataDefinition.html#a4394ff8628ff9d764cdcb536ef36b3c6">DataDefinition::developerFieldDefinitions</a></div><div class="ttdeci">QList&lt; DeveloperFieldDefinition &gt; developerFieldDefinitions</div><div class="ttdoc">Definitions list of all custom fields, if any, present in the described Data Message.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00091">types_p.h:91</a></div></div>
<div class="ttc" id="astructDataDefinition_html_ac48daaed22d72cd8a025c6c13c455b99"><div class="ttname"><a href="structDataDefinition.html#ac48daaed22d72cd8a025c6c13c455b99">DataDefinition::architecture</a></div><div class="ttdeci">Architecture architecture</div><div class="ttdoc">Architecture type for any multi-byte fields.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00084">types_p.h:84</a></div></div>
<div class="ttc" id="astructDataDefinition_html_acdf8d52c19ad998b469e68d3fc1b7ddd"><div class="ttname"><a href="structDataDefinition.html#acdf8d52c19ad998b469e68d3fc1b7ddd">DataDefinition::globalMessageNumber</a></div><div class="ttdeci">MesgNum globalMessageNumber</div><div class="ttdoc">FIT Global Message Number the Data Message represents.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00085">types_p.h:85</a></div></div>
<div class="ttc" id="astructDeveloperFieldDefinition_html"><div class="ttname"><a href="structDeveloperFieldDefinition.html">DeveloperFieldDefinition</a></div><div class="ttdoc">Custom developer field definition.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00055">types_p.h:55</a></div></div>
<div class="ttc" id="astructDeveloperFieldDefinition_html_a0cdc4a4b6f65cafba216ff551f308001"><div class="ttname"><a href="structDeveloperFieldDefinition.html#a0cdc4a4b6f65cafba216ff551f308001">DeveloperFieldDefinition::fieldNumber</a></div><div class="ttdeci">quint8 fieldNumber</div><div class="ttdoc">Maps to the field_definition_number of a field_description Message.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00056">types_p.h:56</a></div></div>
<div class="ttc" id="astructDeveloperFieldDefinition_html_a449a9c8747def15719597d27ae7ed00b"><div class="ttname"><a href="structDeveloperFieldDefinition.html#a449a9c8747def15719597d27ae7ed00b">DeveloperFieldDefinition::size</a></div><div class="ttdeci">quint8 size</div><div class="ttdoc">Size (in bytes) of the specified FIT message’s field.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00057">types_p.h:57</a></div></div>
<div class="ttc" id="astructDeveloperFieldDefinition_html_a5d607b902765d25b429a423e3206ff11"><div class="ttname"><a href="structDeveloperFieldDefinition.html#a5d607b902765d25b429a423e3206ff11">DeveloperFieldDefinition::devDataIndex</a></div><div class="ttdeci">quint8 devDataIndex</div><div class="ttdoc">Maps to the developer_data_index of a developer_data_id Message.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00058">types_p.h:58</a></div></div>
<div class="ttc" id="astructFieldDefinition_html"><div class="ttname"><a href="structFieldDefinition.html">FieldDefinition</a></div><div class="ttdoc">Field Definition for FIT Data Messages.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00069">types_p.h:69</a></div></div>
<div class="ttc" id="astructFieldDefinition_html_a3856a9546c68e23d961f1727aa9da60b"><div class="ttname"><a href="structFieldDefinition.html#a3856a9546c68e23d961f1727aa9da60b">FieldDefinition::baseType</a></div><div class="ttdeci">FitBaseType baseType</div><div class="ttdoc">Base type for interpreting unknown fields.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00072">types_p.h:72</a></div></div>
<div class="ttc" id="astructFieldDefinition_html_a62afa0ec7bb936c3a543949b7cd2a2af"><div class="ttname"><a href="structFieldDefinition.html#a62afa0ec7bb936c3a543949b7cd2a2af">FieldDefinition::number</a></div><div class="ttdeci">quint8 number</div><div class="ttdoc">Unique ID for the FIT field within a given FIT data message.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00070">types_p.h:70</a></div></div>
<div class="ttc" id="astructFieldDefinition_html_aad2191d20cf144ff378cda5b32ca1a4e"><div class="ttname"><a href="structFieldDefinition.html#aad2191d20cf144ff378cda5b32ca1a4e">FieldDefinition::size</a></div><div class="ttdeci">quint8 size</div><div class="ttdoc">Size (in bytes) of the field.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00071">types_p.h:71</a></div></div>
<div class="ttc" id="atypes_8h_html_a762f1a1f27964f1fef3bf145d49adf05"><div class="ttname"><a href="types_8h.html#a762f1a1f27964f1fef3bf145d49adf05">FitBaseType</a></div><div class="ttdeci">FitBaseType</div><div class="ttdoc">Garmin FIT FitBaseType type.</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l03388">types.h:3388</a></div></div>
<div class="ttc" id="atypes_8h_html_aac99da303e65f2fd0821198e4b6cf22c"><div class="ttname"><a href="types_8h.html#aac99da303e65f2fd0821198e4b6cf22c">MesgNum</a></div><div class="ttdeci">MesgNum</div><div class="ttdoc">Garmin FIT MesgNum type.</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00091">types.h:91</a></div></div>
<div class="ttc" id="atypes__p_8h_html_a9d29ee6d65ece8256e068c11186a92e8"><div class="ttname"><a href="types__p_8h.html#a9d29ee6d65ece8256e068c11186a92e8">Architecture</a></div><div class="ttdeci">Architecture</div><div class="ttdoc">Architecture Type for FIT Data Messages.</div><div class="ttdef"><b>Definition:</b> <a href="types__p_8h_source.html#l00042">types_p.h:42</a></div></div>
<div class="ttc" id="atypes__p_8h_html_a9d29ee6d65ece8256e068c11186a92e8a2ce7a92ae43763828ac4acb4560c2a5b"><div class="ttname"><a href="types__p_8h.html#a9d29ee6d65ece8256e068c11186a92e8a2ce7a92ae43763828ac4acb4560c2a5b">Architecture::BigEndian</a></div><div class="ttdeci">@ BigEndian</div><div class="ttdoc">Little-endian byte ordering.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="types__p_8h_source.html#l00084">DataDefinition::architecture</a>, <a class="el" href="types__p_8h_source.html#l00072">FieldDefinition::baseType</a>, <a class="el" href="types__p_8h.html#a9d29ee6d65ece8256e068c11186a92e8a2ce7a92ae43763828ac4acb4560c2a5b">BigEndian</a>, <a class="el" href="fitstreamreader__p_8h_source.html#l00078">dataDefinitions</a>, <a class="el" href="types__p_8h_source.html#l00058">DeveloperFieldDefinition::devDataIndex</a>, <a class="el" href="types__p_8h_source.html#l00091">DataDefinition::developerFieldDefinitions</a>, <a class="el" href="types__p_8h_source.html#l00088">DataDefinition::fieldDefinitions</a>, <a class="el" href="types__p_8h_source.html#l00056">DeveloperFieldDefinition::fieldNumber</a>, <a class="el" href="types__p_8h_source.html#l00085">DataDefinition::globalMessageNumber</a>, <a class="el" href="fitstreamreader_8cpp_source.html#l00702">isDefinitionMessage()</a>, <a class="el" href="types__p_8h_source.html#l00070">FieldDefinition::number</a>, <a class="el" href="types__p_8h_source.html#l00101">DataDefinition::recordSize</a>, <a class="el" href="types__p_8h_source.html#l00057">DeveloperFieldDefinition::size</a>, and <a class="el" href="types__p_8h_source.html#l00071">FieldDefinition::size</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classFitStreamReaderPrivate_a1dd45f588b8ecb89cc8968c6c5d0381f_cgraph.svg" width="423" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ae158e9d75149893030cedf1b13d6b07b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae158e9d75149893030cedf1b13d6b07b">&#9670;&nbsp;</a></span>parseFileHeader()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool FitStreamReaderPrivate::parseFileHeader</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads and parses the FIT stream's file header. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Provide, and document, a way for the caller to distingish errors from simply not-enough- bytes-yet, when <code>false</code> it returned.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the header was successfully read and parsed, <code>false</code> otherwise. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>set not-enough-bytes; ie might need to wait for more bytes. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>set invalid header size error; ie FIT stream is corrupt / invalid. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>set invalid header data type (must be ".FIT"). </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>set error, and return false here? </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00319">319</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    Q_ASSERT(<a class="code" href="classFitStreamReaderPrivate.html#a784dba2fad2b19065b295ef4ba1399e9">protocolVersion</a>.isNull());</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    Q_ASSERT(<a class="code" href="classFitStreamReaderPrivate.html#a536f735ae4c3d6371efa3e3e0414d172">profileVersion</a>.isNull());</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// Read the header bytes.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keyword">const</span> QByteArray header = readFileHeader&lt;T&gt;();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    qDebug() &lt;&lt; <span class="stringliteral">&quot;Header size&quot;</span> &lt;&lt; header.size() &lt;&lt; <span class="stringliteral">&quot;bytes&quot;</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (header.isEmpty()) {<span class="comment"></span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">        /// \todo set not-enough-bytes; ie might need to wait for more bytes.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"></span>        qDebug() &lt;&lt; <span class="stringliteral">&quot;not enough bytes for header&quot;</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">if</span> (header.size() &lt; 12) {<span class="comment"></span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">        /// \todo set invalid header size error; ie FIT stream is corrupt / invalid.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"></span>        qDebug() &lt;&lt; <span class="stringliteral">&quot;invalid header size&quot;</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    {   <span class="comment">// Protocol version is split into two parts: high 4 bits major, a low 4 bits minor.</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keyword">const</span> quint8 version = header.at(1);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <a class="code" href="classFitStreamReaderPrivate.html#a784dba2fad2b19065b295ef4ba1399e9">protocolVersion</a> = QVersionNumber(version &gt;&gt; 4, version &amp; 0x0F);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        qDebug() &lt;&lt; <span class="stringliteral">&quot;Protocol version&quot;</span> &lt;&lt; <a class="code" href="classFitStreamReaderPrivate.html#a784dba2fad2b19065b295ef4ba1399e9">protocolVersion</a>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    {   <span class="comment">// Profile version is major*100 + minor (ie minor could not be more than 99).</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keyword">const</span> quint16 version = qFromLittleEndian&lt;quint16&gt;(header.mid(2,2).data());</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <a class="code" href="classFitStreamReaderPrivate.html#a536f735ae4c3d6371efa3e3e0414d172">profileVersion</a> = QVersionNumber(version/100, version%100);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        qDebug() &lt;&lt; <span class="stringliteral">&quot;Profile version&quot;</span> &lt;&lt; <a class="code" href="classFitStreamReaderPrivate.html#a536f735ae4c3d6371efa3e3e0414d172">profileVersion</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="classFitStreamReaderPrivate.html#a039a774c86525f7b281b7e39efa385ca">expectedDataSize</a> = qFromLittleEndian&lt;quint32&gt;(header.mid(4,4).data());</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    qDebug() &lt;&lt; <span class="stringliteral">&quot;Data size&quot;</span> &lt;&lt; <a class="code" href="classFitStreamReaderPrivate.html#a039a774c86525f7b281b7e39efa385ca">expectedDataSize</a> &lt;&lt; <span class="stringliteral">&quot;bytes&quot;</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keyword">const</span> QByteArray dataType = header.mid(8,4);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    qDebug() &lt;&lt; <span class="stringliteral">&quot;Data type&quot;</span> &lt;&lt; dataType;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (dataType != QByteArray(<span class="stringliteral">&quot;.FIT&quot;</span>)) {<span class="comment"></span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">        /// \todo set invalid header data type (must be &quot;.FIT&quot;).</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"></span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// Check the header&#39;s checksum (only present in 14+ byte headers, and even then may be 0x0000).</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span> (header.size() &gt;= 14) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keyword">const</span> quint16 expectedChecksum = qFromLittleEndian&lt;quint16&gt;(<a class="code" href="classFitStreamReaderPrivate.html#a200ad0a1cb1dda3cbe03f3c47bf1293d">data</a>.mid(12,2).data());</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> (expectedChecksum == 0x0000) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            qDebug() &lt;&lt; <span class="stringliteral">&quot;FIT file has (optional) checksum 0x0000; ignoring.&quot;</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keyword">const</span> quint16 calculatedChecksum = <a class="code" href="classFitStreamReaderPrivate.html#a4aa9e9225c85c1a34d28e700f9d55565">fitChecksum</a>(header.mid(0,12));</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            qDebug() &lt;&lt; <span class="stringliteral">&quot;Header checksum&quot;</span> &lt;&lt; expectedChecksum &lt;&lt; calculatedChecksum;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span> (calculatedChecksum != expectedChecksum) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                qWarning() &lt;&lt; <span class="stringliteral">&quot;Checksum failure:&quot;</span> &lt;&lt; calculatedChecksum &lt;&lt; <span class="stringliteral">&quot;!=&quot;</span> &lt;&lt; expectedChecksum;<span class="comment"></span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">                /// \todo set error, and return false here?</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"></span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                qDebug() &lt;&lt; <span class="stringliteral">&quot;Checkums match&quot;</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div>
<div class="ttc" id="aclassFitStreamReaderPrivate_html_a039a774c86525f7b281b7e39efa385ca"><div class="ttname"><a href="classFitStreamReaderPrivate.html#a039a774c86525f7b281b7e39efa385ca">FitStreamReaderPrivate::expectedDataSize</a></div><div class="ttdeci">quint32 expectedDataSize</div><div class="ttdoc">Total size, in bytes, expected to comprise the FIT file.</div><div class="ttdef"><b>Definition:</b> <a href="fitstreamreader__p_8h_source.html#l00075">fitstreamreader_p.h:75</a></div></div>
<div class="ttc" id="aclassFitStreamReaderPrivate_html_a4aa9e9225c85c1a34d28e700f9d55565"><div class="ttname"><a href="classFitStreamReaderPrivate.html#a4aa9e9225c85c1a34d28e700f9d55565">FitStreamReaderPrivate::fitChecksum</a></div><div class="ttdeci">static quint16 fitChecksum(const QByteArray &amp;data)</div><div class="ttdoc">Calculates a checksum, as per the algorithm used by FIT file headers.</div><div class="ttdef"><b>Definition:</b> <a href="fitstreamreader_8cpp_source.html#l00678">fitstreamreader.cpp:678</a></div></div>
<div class="ttc" id="aclassFitStreamReaderPrivate_html_a536f735ae4c3d6371efa3e3e0414d172"><div class="ttname"><a href="classFitStreamReaderPrivate.html#a536f735ae4c3d6371efa3e3e0414d172">FitStreamReaderPrivate::profileVersion</a></div><div class="ttdeci">QVersionNumber profileVersion</div><div class="ttdoc">Protocol version read from the parsed FIT file header.</div><div class="ttdef"><b>Definition:</b> <a href="fitstreamreader__p_8h_source.html#l00074">fitstreamreader_p.h:74</a></div></div>
<div class="ttc" id="aclassFitStreamReaderPrivate_html_a784dba2fad2b19065b295ef4ba1399e9"><div class="ttname"><a href="classFitStreamReaderPrivate.html#a784dba2fad2b19065b295ef4ba1399e9">FitStreamReaderPrivate::protocolVersion</a></div><div class="ttdeci">QVersionNumber protocolVersion</div><div class="ttdoc">Protocol version read from the parsed FIT file header.</div><div class="ttdef"><b>Definition:</b> <a href="fitstreamreader__p_8h_source.html#l00073">fitstreamreader_p.h:73</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fitstreamreader__p_8h_source.html#l00049">data</a>, <a class="el" href="fitstreamreader__p_8h_source.html#l00075">expectedDataSize</a>, <a class="el" href="fitstreamreader_8cpp_source.html#l00678">fitChecksum()</a>, <a class="el" href="fitstreamreader__p_8h_source.html#l00074">profileVersion</a>, and <a class="el" href="fitstreamreader__p_8h_source.html#l00073">protocolVersion</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classFitStreamReaderPrivate_ae158e9d75149893030cedf1b13d6b07b_cgraph.svg" width="414" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa440677b40bab68dd12743b09bc23a3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa440677b40bab68dd12743b09bc23a3c">&#9670;&nbsp;</a></span>peekByte() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">quint8 FitStreamReaderPrivate::peekByte </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specialisation for reading from QByteArray objects. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>The position (relative to the current stream position) to peek.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next <em>pos'th</em> byte, or <code>0</code> if not enough bytes were available. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00566">566</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;{</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    Q_ASSERT(<a class="code" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a> == <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classFitStreamReaderPrivate.html#a200ad0a1cb1dda3cbe03f3c47bf1293d">data</a>.size() &gt; (<a class="code" href="classFitStreamReaderPrivate.html#a81ab38ab6097d7de6e2d39ba57517272">dataOffset</a> + pos)) ? <a class="code" href="classFitStreamReaderPrivate.html#a200ad0a1cb1dda3cbe03f3c47bf1293d">data</a>.at(<a class="code" href="classFitStreamReaderPrivate.html#a81ab38ab6097d7de6e2d39ba57517272">dataOffset</a>+pos) : 0;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fitstreamreader__p_8h_source.html#l00049">data</a>, <a class="el" href="fitstreamreader__p_8h_source.html#l00050">dataOffset</a>, and <a class="el" href="fitstreamreader__p_8h_source.html#l00051">device</a>.</p>

</div>
</div>
<a id="aa440677b40bab68dd12743b09bc23a3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa440677b40bab68dd12743b09bc23a3c">&#9670;&nbsp;</a></span>peekByte() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">quint8 FitStreamReaderPrivate::peekByte </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specialisation for reading from QIODevice streams. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>The position (relative to the current stream position) to peek.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next <em>pos'th</em> byte, or <code>0</code> if not enough bytes were available. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00579">579</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;{</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    Q_ASSERT(<a class="code" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keyword">const</span> QByteArray bytes = <a class="code" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a>-&gt;peek(1+pos);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">return</span> (bytes.size() &gt; pos) ? bytes.at(pos) : 0;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fitstreamreader__p_8h_source.html#l00051">device</a>.</p>

</div>
</div>
<a id="a3620f5924ca30eecc7890dd1ac7cba9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3620f5924ca30eecc7890dd1ac7cba9f">&#9670;&nbsp;</a></span>peekByte() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FitStreamReaderPrivate::peekByte </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>pos</em> = <code>0</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Peeks the next <em>pos'th</em> byte in the FIT stream. </p>
<p>If less than <em>pos</em> bytes are available, <code>0</code> will be returned. It is the caller's responsibility to first check that there are enough bytes availble (eg via bytesAvailable) before calling this, otherwise it would be impossible to distinguish between not-enough-bytes-available and reading a valid <code>0x00</code> byte.</p>
<p>Of course, we could provide a better error feedback mechanism, but as this is an internal private function, and all of our callers need to check for bytes first anyway, this is the more efficient pattern here.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>The position (relative to the current stream position) to peek.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next <em>pos'th</em> byte, or <code>0</code> if not enough bytes were available. </dd></dl>

</div>
</div>
<a id="aa00709ad70b4e3fb322093813901f7ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa00709ad70b4e3fb322093813901f7ef">&#9670;&nbsp;</a></span>readBytes() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray FitStreamReaderPrivate::readBytes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specialisation for reading from QIODevice streams. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The number of bytes to read.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next <em>size</em> bytes, or an empty <code>QDataArray</code> if less than <em>size</em> bytes were available. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00603">603</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;{</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    Q_ASSERT(<a class="code" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a> == <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">return</span> ((<a class="code" href="classFitStreamReaderPrivate.html#a200ad0a1cb1dda3cbe03f3c47bf1293d">data</a>.size() - <a class="code" href="classFitStreamReaderPrivate.html#a81ab38ab6097d7de6e2d39ba57517272">dataOffset</a>) &lt; size) ? QByteArray() : <a class="code" href="classFitStreamReaderPrivate.html#a200ad0a1cb1dda3cbe03f3c47bf1293d">data</a>.mid((<a class="code" href="classFitStreamReaderPrivate.html#a81ab38ab6097d7de6e2d39ba57517272">dataOffset</a>+=size)-size, size);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fitstreamreader__p_8h_source.html#l00049">data</a>, <a class="el" href="fitstreamreader__p_8h_source.html#l00050">dataOffset</a>, and <a class="el" href="fitstreamreader__p_8h_source.html#l00051">device</a>.</p>

</div>
</div>
<a id="aa00709ad70b4e3fb322093813901f7ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa00709ad70b4e3fb322093813901f7ef">&#9670;&nbsp;</a></span>readBytes() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray FitStreamReaderPrivate::readBytes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specialisation for reading from QIODevice streams. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The number of bytes to read.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next <em>size</em> bytes, or an empty <code>QDataArray</code> if less than <em>size</em> bytes were available. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00616">616</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;{</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    Q_ASSERT(<a class="code" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a>-&gt;bytesAvailable() &lt; size) ? QByteArray() : <a class="code" href="classFitStreamReaderPrivate.html#a174b6b45ff54f0b149b59aebdb8061b5">device</a>-&gt;read(size);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fitstreamreader__p_8h_source.html#l00051">device</a>.</p>

</div>
</div>
<a id="ae2e3e6cca8318f9f076e45bf6e87b452"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2e3e6cca8318f9f076e45bf6e87b452">&#9670;&nbsp;</a></span>readBytes() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FitStreamReaderPrivate::readBytes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFitStreamReaderPrivate.html#acf93389d706fbe22fe4b1addb0d4264c">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads the next <em>size</em> bytes from the FIT stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The number of bytes to read.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next <em>size</em> bytes, or an empty <code>QDataArray</code> if less than <em>size</em> bytes were available. </dd></dl>

</div>
</div>
<a id="a6521cfb558bd434888d4d90db166612b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6521cfb558bd434888d4d90db166612b">&#9670;&nbsp;</a></span>readFileHeader()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray FitStreamReaderPrivate::readFileHeader</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads all bytes of the FIT stream file header. </p>
<p>This function will first peek the header length (if available), and then read the entire header if (and only if) all header bytes are available.</p>
<dl class="section return"><dt>Returns</dt><dd>the FIT file header, or an empty <code>QByteArray</code> if not enough bytes were available. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00630">630</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;{</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">// Return `n` bytes, where `n` is given by the first byte (ie a length-prefixed buffer).</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">return</span> (bytesAvailable&lt;T&gt;()) ? readBytes&lt;T&gt;(peekByte&lt;T&gt;()) : QByteArray();</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0fe05991aa88701417151c05781871c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fe05991aa88701417151c05781871c4">&#9670;&nbsp;</a></span>readNextDataMessage()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAbstractDataMessage.html">AbstractDataMessage</a> * FitStreamReaderPrivate::readNextDataMessage</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads up to, and including, the next FIT Data Message. </p>
<p>This function will continue reading the FIT stream until either no bytes are available, or a FIT Data Message has been located and parsed (or failed to be parsed). If (as expected) Definition Messages are found in the process, then they will be parse, and their definitions cached for interpreting future Data Messages.</p>
<dl class="section note"><dt>Note</dt><dd>The caller takes ownership of the returned pointer (if not <code>nullptr</code>), and is responsible for deleting object when finished with.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>the next FIT Data Message, or a <code>nullptr</code> if none found, or an error occurred. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitstreamreader_8cpp_source.html#l00649">649</a> of file <a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;{</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="comment">// If we haven&#39;t parsed the FIT File Header yet, do so now.</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="classFitStreamReaderPrivate.html#a784dba2fad2b19065b295ef4ba1399e9">protocolVersion</a>.isNull() &amp;&amp; (!parseFileHeader&lt;T&gt;()))) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// Process all FIT Data Records until we get a FIT Data Message (or run out of bytes).</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">while</span> (bytesAvailable&lt;T&gt;()) { <span class="comment">// At least one byte, for the next data record header byte.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keyword">const</span> quint8 recordHeader = peekByte&lt;T&gt;();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classFitStreamReaderPrivate.html#a1a5399efd9c35426756598773cacd14e">isDefinitionMessage</a>(recordHeader)) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="keywordflow">if</span> (!parseDefinitionMessage&lt;T&gt;()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="comment">// Not returning here; we&#39;ll continue processing until we get a FIT Data Message.</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">return</span> parseDataMessage&lt;T&gt;();</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fitstreamreader_8cpp_source.html#l00702">isDefinitionMessage()</a>, and <a class="el" href="fitstreamreader__p_8h_source.html#l00073">protocolVersion</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classFitStreamReaderPrivate_a0fe05991aa88701417151c05781871c4_cgraph.svg" width="415" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="fitstreamreader__p_8h_source.html">fitstreamreader_p.h</a></li>
<li><a class="el" href="fitstreamreader_8cpp_source.html">fitstreamreader.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classFitStreamReaderPrivate.html">FitStreamReaderPrivate</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
